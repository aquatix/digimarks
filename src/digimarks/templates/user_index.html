{% extends "base.html" %}
{% block title %}Bookmarks{% endblock %}
{% block pageheader %}Bookmarks{% endblock %}
{% block pagecontent %}

    <div id="container"
         x-init="$store.digimarks.userKey = '{{ user_key }}'; $store.digimarks.loadCache(); $store.digimarks.getBookmarks()"
         x-data="">

        <header>

            <nav class="menu">
                <ul>
                    <li>digimarks</li>
                    <li>tags</li>
                    <li>add bookmark</li>
                </ul>
                <input x-model="$store.digimarks.search" placeholder="Search...">
            </nav>
        </header>
        <main>

            <p>Welcome user <span x-text="$store.digimarks.userKey"></span>!</p>
            <div x-show="$store.digimarks.loading">Loading...</div>

            <p>
                <button @click="$store.digimarks.sortAlphabetically()">sort a-z</button>
                <button @click="$store.digimarks.sortAlphabetically('desc')">sort z-a</button>
                <button @click="$store.digimarks.sortCreated()">sort date asc</button>
                <button @click="$store.digimarks.sortCreated('desc')">sort date desc</button>
            </p>

            <ul x-cloak>
                <template x-for="bookmark in $store.digimarks.filteredBookmarks" :key="bookmark.id">
                    <li><a x-text="bookmark.title" x-bind:href="bookmark.url" target="_blank"></a></li>
                </template>
            </ul>

            <h2>tags</h2>
            <ul x-cloak>
                <template x-for="tag in $store.digimarks.filteredTags" :key="tag">
                    <li x-text="tag"></li>
                </template>
            </ul>
        </main>
    </div>
{% endblock %}
