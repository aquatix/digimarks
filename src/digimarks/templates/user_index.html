{% extends "base.html" %}
{% block title %}Bookmarks{% endblock %}
{% block pageheader %}Bookmarks{% endblock %}
{% block pagecontent %}
    <article
            x-init="$store.digimarks.userKey = '{{ user_key }}'; $store.digimarks.loadCache(); $store.digimarks.getBookmarks()"
            x-data="">

        <header>
            <nav class="menu">
                <ul>
                    <li>digimarks</li>
                    <li>
                        <button x-data @click="$store.digimarks.toggleTagPage()"
                                :class="$store.digimarks.show_tags && 'active'">tags
                        </button>
                    </li>
                    <li>
                        <button x-data>add bookmark</button>
                    </li>
                    <li>
                        <button @click="$store.digimarks.toggleDarkmode()" class="theme-toggle">mode</button>
                    </li>
                    <li>
                        <button @click="$store.digimarks.toggleTheme()">theme</button>
                    </li>
                    <li><input x-model="$store.digimarks.search" placeholder="Search..."></li>
                    <li x-show="$store.digimarks.loading">&orarr;</li>
                </ul>
            </nav>
        </header>

        <main>
            <section x-cloak x-show="$store.digimarks.show_bookmarks" x-transition.opacity>
                <h1 x-bind:title="$store.digimarks.userKey">Bookmarks</h1>

                <p>
                    <button @click="$store.digimarks.sortAlphabetically()"
                            :class="$store.digimarks.sort_title_asc && 'active'">a-z &darr;
                    </button>
                    <button @click="$store.digimarks.sortAlphabetically('desc')"
                            :class="$store.digimarks.sort_title_desc && 'active'">z-a &uarr;
                    </button>
                    <button @click="$store.digimarks.sortCreated()"
                            :class="$store.digimarks.sort_created_asc && 'active'">date &darr;
                    </button>
                    <button @click="$store.digimarks.sortCreated('desc')"
                            :class="$store.digimarks.sort_created_desc && 'active'">date &uarr;
                    </button>
                    <button @click="$store.digimarks.toggleListOrGrid()"
                            :class="$store.digimarks.show_bookmarks_cards && 'active'">list or grid
                    </button>
                </p>

                <ul x-cloak x-show="$store.digimarks.show_bookmarks_list">
                    <template x-for="bookmark in $store.digimarks.filteredBookmarks" :key="bookmark.id">
                        <li><a x-text="bookmark.title" x-bind:href="bookmark.url" target="_blank"></a></li>
                    </template>
                </ul>

                <section x-cloak x-show="$store.digimarks.show_bookmarks_cards" class="cards">
                    <template x-for="bookmark in $store.digimarks.filteredBookmarks" :key="bookmark.id">
                        <div class="card">
                            <div x-show="bookmark.starred">*</div>
                            {#                            <img x-show="bookmark.favicon" x-bind:src="'/static/favicons/' + bookmark.favicon">#}
                            <a x-text="bookmark.title" x-bind:href="bookmark.url" target="_blank"></a>
                            <div x-text="bookmark.tags" class="meta"></div>
                        </div>
                    </template>
                </section>
            </section>

            <section x-cloak x-show="$store.digimarks.show_tags" x-transition.opacity>
                <h1>Tags</h1>

                <ul>
                    <template x-for="tag in $store.digimarks.filteredTags" :key="tag">
                        <li x-text="tag"></li>
                    </template>
                </ul>
            </section>
        </main>

    </article>
{% endblock %}
